<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>富文本编辑器示例</title>
    <!-- 引入wangEditor CSS -->
    <link href="https://unpkg.com/@wangeditor/editor@latest/dist/css/style.css" rel="stylesheet">
    <style>
        body {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        #editor-container {
            border: 1px solid #ccc;
            min-height: 300px;
        }
        #toolbar-container {
            border: 1px solid #ccc;
            border-bottom: none;
        }
        .editor-wrapper {
            margin: 20px 0;
        }
        button {
            padding: 8px 16px;
            margin-right: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>富文本编辑器演示</h1>
    
    <div class="editor-wrapper">
        <!-- 工具栏容器 -->
        <div id="toolbar-container"></div>
        <!-- 编辑器容器 -->
        <div id="editor-container"></div>
    </div>
    
    <div>
        <button id="btn-get-html">获取HTML内容</button>
        <button id="btn-get-text">获取纯文本</button>
        <button id="btn-set-content">设置内容</button>
    </div>
    
    <div style="margin-top: 20px;">
        <h3>获取的内容将显示在这里：</h3>
        <pre id="content-display"></pre>
    </div>
    
    <!-- 隐藏表单字段，用于表单提交 -->
    <form id="editor-form" style="display: none;">
        <input type="hidden" id="editor-content" name="content">
    </form>
    
    <!-- 引入wangEditor JS -->
    <script src="https://unpkg.com/@wangeditor/editor@latest/dist/index.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const { createEditor, createToolbar } = window.wangEditor;
            
            // 编辑器配置
            const editorConfig = {
                placeholder: '请输入内容...',
                onChange(editor) {
                    // 内容变化时回调
                    const html = editor.getHtml();
                    // 更新隐藏表单字段的值
                    document.getElementById('editor-content').value = html;
                },
                // 上传图片配置（按需配置）
                MENU_CONF: {
                    uploadImage: {
                        server: '/api/upload', // 你的上传接口
                        fieldName: 'file',
                        maxFileSize: 10 * 1024 * 1024, // 10M
                        allowedFileTypes: ['image/*'],
                        onSuccess(file, res) {
                            console.log(`${file.name} 上传成功`, res);
                        },
                        onFailed(file, res) {
                            alert(`${file.name} 上传失败`);
                        },
                        onError(file, err, res) {
                            alert(`${file.name} 上传出错`);
                            console.error(err);
                        }
                    }
                }
            };
            
            // 创建编辑器
            const editor = createEditor({
                selector: '#editor-container',
                config: editorConfig,
                html: '<p><br></p>' // 初始内容
            });
            
            // 工具栏配置
            const toolbarConfig = {
                // 排除不需要的菜单项
                excludeKeys: [
                    'group-video',  // 排除视频
                    'insertTable',    // 排除表格
                    'codeBlock'       // 排除代码块
                ]
            };
            
            // 创建工具栏
            const toolbar = createToolbar({
                editor,
                selector: '#toolbar-container',
                config: toolbarConfig,
                mode: 'default' // 'default' 或 'simple' 模式
            });
            
            // 获取HTML内容按钮
            document.getElementById('btn-get-html').addEventListener('click', function() {
                const html = editor.getHtml();
                document.getElementById('content-display').textContent = html;
                console.log('HTML内容:', html);
            });
            
            // 获取纯文本按钮
            document.getElementById('btn-get-text').addEventListener('click', function() {
                const text = editor.getText();
                document.getElementById('content-display').textContent = text;
                console.log('纯文本内容:', text);
            });
            
            // 设置内容按钮
            document.getElementById('btn-set-content').addEventListener('click', function() {
                editor.setHtml('<h2>这是预设的标题</h2><p>这是预设的段落内容，你可以继续编辑...</p>');
            });
            
            // 表单提交示例（实际使用时取消注释）
            // document.getElementById('my-form').addEventListener('submit', function(e) {
            //     e.preventDefault();
            //     const content = editor.getHtml();
            //     // 这里可以处理表单提交逻辑
            //     console.log('提交的内容:', content);
            // });
        });
    </script>
</body>
</html>